/*
 * This file was generated by the Gradle 'init' task.
 */

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath "org.jfrog.buildinfo:build-info-extractor-gradle:4.13.0"
    }
}

plugins {
    id 'java'
    id 'maven-publish'
    id 'com.jfrog.artifactory' version "4.13.0"
}


allprojects {
    group = 'nz.co.comrad.hapi-hl7v2'
    version = '2.4.1-SNAPSHOT'
    apply plugin: "com.jfrog.artifactory"
}


subprojects {
    apply plugin: 'java'
    apply plugin: 'maven-publish'

    repositories {
        mavenLocal()
        maven {
            url = uri('https://oss.sonatype.org/content/repositories/snapshots')
        }

        maven {
            url = uri('https://repo.maven.apache.org/maven2')
        }

        maven {
            url = uri('http://repo.springsource.org/release')
        }
    }

    sourceCompatibility = '1.6'
    targetCompatibility = '1.6'

    configurations.all {
    }

    publishing {
        publications {
            mavenJava(MavenPublication) {
                from components.java
            }
        }
    }

    artifactory {
        contextUrl = ARTIFACTORY_URL
        publish {
            repository {
                repoKey = "libs-snapshot-local" // Use this one for publishing snapshots
                username = ARTIFACTORY_USERNAME
                password = ARTIFACTORY_PASSWORD
            }
            defaults {
                publications('mavenJava')
                publishArtifacts = true
                publishPom = true
            }
        }
    }

    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }
}



